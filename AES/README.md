# Лабораторная работа 3: Применение симметричных шифров

## Постановка задачи

Напишите программу, шифрующую изображение `tux.png` (формат не принципиален) с помощью шифра AES. Режимы шифрования: ECB, CBC, CFB и OFB (нужно получить четыре варианта зашифрованного изображения). В учебных целях заголовочную часть файла зашифровывать не нужно. Сравните результаты шифрования.

## Описание решения

Метод `generateKey` для генерации ключа использует `ProcessBuilder`, аргументом которого будет являться команда для запуска командной строки Windows (`cmd.exe`) и запуска в ней утилиты openssl с аргументами «`rand -hex 16`». В результате команда сгенерирует случайный ключ длины 16 в шестнадцатеричном представлении. Далее при помощи `InputStream` запущенного процесса получается результат выполнения команды, выводится в консоль и в качестве результата возвращается ключ.

Метод `opensslEnc` работает по аналогии с предыдущим методом, но вместо генерации ключа выполняет шифрование/дешифрование файла. Аргументами метода являются путь к входному и выходному файлу, режим шифрования (ECB, CBC, CFB, OFB), ключ, а также булев параметр `decrypt`, определяющий какое действие необходимо совершить с файлом.

Основную работу будет выполнять метод `aesCipher`. Его аргументами являются пути к входному/выходному файлу, временному файлу для исходных байтов изображения, временному файлу для зашифрованных байтов изображения, режим шифрования, ключ и булев параметр `decrypt`.

1. Сначала происходит чтение входного файла и разделение заголовка (110 первых байтов в нашем случае) и байтов пикселей.
2. Байты пикселей записываются во временный файл, который передается методу `opensslEnc` для шифрования/дешифрования.
3. Из файла, содержащего обработанные байты, происходит их извлечение в массив байтов.
4. В завершении метода в выходной файл записывается заголовок и обработанные байты пикселей.

Точка входа в программу – метод `main`. Здесь определяются пути к исходному и временным файлам, массив режимов шифрования, а также генерируется ключ. Далее для каждого режима шифрования будут определяться пути для выходных файлов (зашифрованный и расшифрованный), а также вызываться метод `aesCipher`: в первый раз для шифрования файла, во второй раз для дешифрования.

# Лабораторная работа 5: Изучение свойств мультипликативной группы расширенного поля Галуа

## Постановка задачи

Реализуйте генератор псевдослучайной последовательности битов на основе регистра сдвига с линейной обратной связью (РСЛОС) в конфигурации Галуа. Начальное значение сдвигового регистра и его образующий многочлен должны задаваться пользователем. Результат представьте в виде точечной диаграммы, где по горизонтали отложены порядковые номера генерируемых битов, а по вертикали – их значения. С помощью критерия χ<sup>2</sup> оцените качество любой генерируемой последовательности максимальной длины. Путем однократного гаммирования, не затрагивая заголовочную часть, зашифруйте изображение `tux.png` (формат не принципиален), порциями по 8 бит. Объясните результат.

## Описание решения

Рассмотрим класс `LFSR`, отвечающий за работу РСЛОС. Класс содержит два поля, которые задаются пользователем через конструктор: `tapPositions` (позиции отводов) и `register` (хранит значения регистра). Метод `generateNextBit` генерирует один бит последовательности, совершая необходимые операции с регистром. В соответствии с конфигурацией Галуа первым делом записывается выходной бит. Если генерируемый бит равен нулю, то все биты в ячейках сдвигаются вправо без изменений. Если генерируемый бит равен единице, то биты отвода меняют своё значение на противоположное, и все биты сдвигаются вправо.

Класс `Main` выведен из класса `JFrame` для возможности отображения результата работы регистра в виде точечной диаграммы. При запуске программы у пользователя запрашивается начальное значение сдвигового регистра и образующий многочлен. На основе начального значения вычисляется максимальная длина последовательности (переменная `numBits`) для оценки критерием χ<sup>2</sup>.

На основе введенных значений создается экземпляр генератора и происходит генерация последовательности. Ожидаемое значение критерия составляет половину длины последовательности. При генерации последовательности подсчитывалось количество каждого бита (0/1), которое возводится в квадрат, делится на ожидаемое значение и суммируется со значением `chiSquare` (изначально 0).

В контексте оценки качества сгенерированной последовательности максимальной длины критерий χ<sup>2</sup> может быть использован для определения того, насколько близко распределение сгенерированных битов соответствует ожидаемому равномерному распределению. Чтобы интерпретировать значение χ<sup>2</sup>, необходимо рассмотреть его уровень значимости и сравнить с критическим значением из таблицы распределения χ<sup>2</sup>. Критическое значение зависит от степени свободы, которая равна количеству категорий (в данном случае 2 {0, 1}) минус 1. Если принять уровень значимости за 0.05, то табличное критическое значение будет равно 3.8. Если рассчитанное значение χ<sup>2</sup> меньше критического значения, это говорит о том, что сгенерированная последовательность близко соответствует ожидаемому распределению и является более качественной.

После оценки последовательности программа приступает к шифрованию изображения путем однократного гаммирования методом `encryptImage`. За основу берется изображение `tux.bmp`. Результирующие биты изображения получаются путем применения операции XOR к исходному биту и биту, сгенерированному регистром сдвига. Если соответствующие биты в значении пикселя и ключевом значении одинаковы, то результирующее зашифрованное значение пикселя будет равно 0. Если биты разные, то зашифрованное значение пикселя будет равно 1.

Поскольку операция XOR является обратимой (XOR-перестановка зашифрованного изображения с тем же ключом вернет исходное изображение), зашифрованное изображение сохранит некоторое визуальное сходство с исходным. Для проверки работы операции зашифрованное изображение передается в метод как входной файл. Повторное применение операции XOR снимает шифрование, образуя в итоге исходное изображение.

В конце конструктора `Main` происходит настройка и вывод данных в GUI программы. Отрисовка точечной диаграммы происходит в методе `paint`.
